以下を参考にしてください。

| # | 症状                                 | 原因                                                                                                                                                                                              | 修正ポイント                                                                                                    |
| - | ---------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| 1 | **バックエンドがまったく更新されない**              | Workflow には「scp/rsync → `npm install` → `pm2 restart`」が **一切無い**。現状は *接続テストだけで終了* しているため、EC2 上のアプリは古いまま。                                                                                        | ― デプロイ処理（コード転送・依存関係インストール・PM2 再起動）を追加する<br>― `.env` 更新が要る場合は `.env` も転送する                                 |
| 2 | **フロントを転送しているがブラウザに変化がない**         | ① `scp Chatbot-Frontend-main/frontend.tar.gz …` は **次の step では存在しないパス**（step ごとに作業ディレクトリが元に戻る）<br>② `/var/www/html` は Nginx の `root` と一致していないケースが多い（Ubuntu/Nginx の既定は `/usr/share/nginx/html`）。 | ― tar を `$GITHUB_WORKSPACE` 直下に移動 or `scp frontend.tar.gz …` に修正<br>― Nginx `server { root …; }` のパスと合わせる |
| 3 | **デプロイ後も Node サーバーのキャッシュが残る**      | `pm2 reload`/`restart` を呼ばず、古いバンドルを配信し続けている                                                                                                                                                     | フロントだけ静的配信なら不要だが、Next.js SSR/SPA の場合は `pm2 reload <app>` が必須 ([pm2.keymetrics.io][1])                     |
| 4 | **キャッシュ (CloudFront/ブラウザ) が残っている** | CloudFront を使っていれば `create-invalidation` が要る                                                                                                                                                    | —                                                                                                         |

[1]: https://pm2.keymetrics.io/docs/usage/application-declaration/?utm_source=chatgpt.com "Ecosystem File - PM2"
